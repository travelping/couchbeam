<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Module couchbeam</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="EDoc">
</head>
<body bgcolor="white">
<div class="navbar"><a name="#navbar_top"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<hr>

<h1>Module couchbeam</h1>
<ul class="index"><li><a href="#index">Function Index</a></li><li><a href="#functions">Function Details</a></li></ul>

<p><b>Behaviours:</b> <a href="gen_server.html"><tt>gen_server</tt></a>.</p>

<h2><a name="index">Function Index</a></h2>
<table width="100%" border="1" cellspacing="0" cellpadding="2" summary="function index"><tr><td valign="top"><a href="#all_dbs-1">all_dbs/1</a></td><td>get list of databases on a CouchDB node.</td></tr>
<tr><td valign="top"><a href="#all_docs-1">all_docs/1</a></td><td>get all documents from a CouchDB database.</td></tr>
<tr><td valign="top"><a href="#all_docs-2">all_docs/2</a></td><td>get all documents from a CouchDB database.</td></tr>
<tr><td valign="top"><a href="#changes-1">changes/1</a></td><td>get all changes.</td></tr>
<tr><td valign="top"><a href="#changes-2">changes/2</a></td><td>get all changes.</td></tr>
<tr><td valign="top"><a href="#changes_wait-2">changes_wait/2</a></td><td>wait for continuous changes.</td></tr>
<tr><td valign="top"><a href="#changes_wait-3">changes_wait/3</a></td><td>wait for continuous changes to a Pid.</td></tr>
<tr><td valign="top"><a href="#changes_wait_once-1">changes_wait_once/1</a></td><td>wait for longpoll changes.</td></tr>
<tr><td valign="top"><a href="#changes_wait_once-2">changes_wait_once/2</a></td><td>wait for longpoll changes.</td></tr>
<tr><td valign="top"><a href="#code_change-3">code_change/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#compact-1">compact/1</a></td><td>Compaction compresses the database file by removing unused
  sections created during updates.</td></tr>
<tr><td valign="top"><a href="#compact-2">compact/2</a></td><td>Like compact/1 but this compacts the view index from the
  current version of the design document.</td></tr>
<tr><td valign="top"><a href="#create_db-2">create_db/2</a></td><td>Create a database and a client for connectiong to it.</td></tr>
<tr><td valign="top"><a href="#create_db-3">create_db/3</a></td><td>Create a database and a client for connectiong to it.</td></tr>
<tr><td valign="top"><a href="#create_db-4">create_db/4</a></td><td>Create a database and a client for connectiong to it.</td></tr>
<tr><td valign="top"><a href="#db_exists-2">db_exists/2</a></td><td>test if db with dbname exists on the CouchDB node.</td></tr>
<tr><td valign="top"><a href="#db_info-1">db_info/1</a></td><td>get database info.</td></tr>
<tr><td valign="top"><a href="#db_request-4">db_request/4</a></td><td></td></tr>
<tr><td valign="top"><a href="#db_request-5">db_request/5</a></td><td></td></tr>
<tr><td valign="top"><a href="#db_request-6">db_request/6</a></td><td></td></tr>
<tr><td valign="top"><a href="#db_url-1">db_url/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#delete_attachment-3">delete_attachment/3</a></td><td>delete a document attachment.</td></tr>
<tr><td valign="top"><a href="#delete_attachment-4">delete_attachment/4</a></td><td>delete a document attachment.</td></tr>
<tr><td valign="top"><a href="#delete_db-1">delete_db/1</a></td><td>delete database.</td></tr>
<tr><td valign="top"><a href="#delete_db-2">delete_db/2</a></td><td>delete database.</td></tr>
<tr><td valign="top"><a href="#delete_doc-2">delete_doc/2</a></td><td>delete a document.</td></tr>
<tr><td valign="top"><a href="#delete_doc-3">delete_doc/3</a></td><td>delete a document
  if you want to make sure the doc it emptied on delete, use the option
  {empty_on_delete,  true} or pass a doc with just _id and _rev
  members.</td></tr>
<tr><td valign="top"><a href="#delete_docs-2">delete_docs/2</a></td><td>delete a list of documents.</td></tr>
<tr><td valign="top"><a href="#delete_docs-3">delete_docs/3</a></td><td>delete a list of documents
  if you want to make sure the doc it emptied on delete, use the option
  {empty_on_delete,  true} or pass a doc with just _id and _rev
  members.</td></tr>
<tr><td valign="top"><a href="#doc_exists-2">doc_exists/2</a></td><td>test if doc with uuid exists in the given db.</td></tr>
<tr><td valign="top"><a href="#doc_url-2">doc_url/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#ensure_full_commit-1">ensure_full_commit/1</a></td><td>commit all docs in memory.</td></tr>
<tr><td valign="top"><a href="#ensure_full_commit-2">ensure_full_commit/2</a></td><td>commit all docs in memory.</td></tr>
<tr><td valign="top"><a href="#fetch_attachment-3">fetch_attachment/3</a></td><td>fetch a document attachment.</td></tr>
<tr><td valign="top"><a href="#fetch_attachment-4">fetch_attachment/4</a></td><td>fetch a document attachment.</td></tr>
<tr><td valign="top"><a href="#fetch_attachment-5">fetch_attachment/5</a></td><td>fetch a document attachment.</td></tr>
<tr><td valign="top"><a href="#get_uuid-1">get_uuid/1</a></td><td>Get one uuid from the server.</td></tr>
<tr><td valign="top"><a href="#get_uuids-2">get_uuids/2</a></td><td>Get a list of uuids from the server.</td></tr>
<tr><td valign="top"><a href="#handle_call-3">handle_call/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#handle_cast-2">handle_cast/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#handle_info-2">handle_info/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#lookup_doc_rev-2">lookup_doc_rev/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#lookup_doc_rev-3">lookup_doc_rev/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#make_url-3">make_url/3</a></td><td></td></tr>
<tr><td valign="top"><a href="#maybe_oauth_header-4">maybe_oauth_header/4</a></td><td></td></tr>
<tr><td valign="top"><a href="#open_db-2">open_db/2</a></td><td>Create a client for connection to a database.</td></tr>
<tr><td valign="top"><a href="#open_db-3">open_db/3</a></td><td>Create a client for connection to a database.</td></tr>
<tr><td valign="top"><a href="#open_doc-2">open_doc/2</a></td><td>open a document.</td></tr>
<tr><td valign="top"><a href="#open_doc-3">open_doc/3</a></td><td>open a document
  Params is a list of query argument.</td></tr>
<tr><td valign="top"><a href="#open_or_create_db-2">open_or_create_db/2</a></td><td>Create a client for connecting to a database and create the
       database if needed.</td></tr>
<tr><td valign="top"><a href="#open_or_create_db-3">open_or_create_db/3</a></td><td>Create a client for connecting to a database and create the
       database if needed.</td></tr>
<tr><td valign="top"><a href="#open_or_create_db-4">open_or_create_db/4</a></td><td>Create a client for connecting to a database and create the
       database if needed.</td></tr>
<tr><td valign="top"><a href="#put_attachment-4">put_attachment/4</a></td><td>put an attachment.</td></tr>
<tr><td valign="top"><a href="#put_attachment-5">put_attachment/5</a></td><td>put an attachment.</td></tr>
<tr><td valign="top"><a href="#replicate-2">replicate/2</a></td><td>Handle replication.</td></tr>
<tr><td valign="top"><a href="#replicate-3">replicate/3</a></td><td>Handle replication.</td></tr>
<tr><td valign="top"><a href="#replicate-4">replicate/4</a></td><td>handle Replication.</td></tr>
<tr><td valign="top"><a href="#request-4">request/4</a></td><td>send an ibrowse request.</td></tr>
<tr><td valign="top"><a href="#request-5">request/5</a></td><td></td></tr>
<tr><td valign="top"><a href="#request-6">request/6</a></td><td></td></tr>
<tr><td valign="top"><a href="#request_stream-4">request_stream/4</a></td><td>stream an ibrowse request.</td></tr>
<tr><td valign="top"><a href="#request_stream-5">request_stream/5</a></td><td></td></tr>
<tr><td valign="top"><a href="#request_stream-6">request_stream/6</a></td><td></td></tr>
<tr><td valign="top"><a href="#save_doc-2">save_doc/2</a></td><td>save a document.</td></tr>
<tr><td valign="top"><a href="#save_doc-3">save_doc/3</a></td><td>save a document  
A document is a Json object like this one:.</td></tr>
<tr><td valign="top"><a href="#save_docs-2">save_docs/2</a></td><td>save a list of documents.</td></tr>
<tr><td valign="top"><a href="#save_docs-3">save_docs/3</a></td><td>save a list of documents.</td></tr>
<tr><td valign="top"><a href="#server_connection-0">server_connection/0</a></td><td>Create a server for connectiong to a CouchDB node.</td></tr>
<tr><td valign="top"><a href="#server_connection-2">server_connection/2</a></td><td>Create a server for connectiong to a CouchDB node.</td></tr>
<tr><td valign="top"><a href="#server_connection-4">server_connection/4</a></td><td>Create a server for connectiong to a CouchDB node.</td></tr>
<tr><td valign="top"><a href="#server_info-1">server_info/1</a></td><td>Get Information from the server.</td></tr>
<tr><td valign="top"><a href="#server_url-1">server_url/1</a></td><td>Assemble the server URL for the given client.</td></tr>
<tr><td valign="top"><a href="#start-0">start/0</a></td><td>Start the couchbeam process.</td></tr>
<tr><td valign="top"><a href="#start_link-0">start_link/0</a></td><td>Starts the couchbeam process linked to the calling process.</td></tr>
<tr><td valign="top"><a href="#stop-0">stop/0</a></td><td>Stop the couchbeam process.</td></tr>
<tr><td valign="top"><a href="#stream_fetch_attachment-4">stream_fetch_attachment/4</a></td><td>stream fetch attachment to a Pid.</td></tr>
<tr><td valign="top"><a href="#stream_fetch_attachment-5">stream_fetch_attachment/5</a></td><td>stream fetch attachment to a Pid.</td></tr>
<tr><td valign="top"><a href="#stream_fetch_attachment-6">stream_fetch_attachment/6</a></td><td>stream fetch attachment to a Pid.</td></tr>
<tr><td valign="top"><a href="#terminate-2">terminate/2</a></td><td></td></tr>
<tr><td valign="top"><a href="#uuids_url-1">uuids_url/1</a></td><td></td></tr>
<tr><td valign="top"><a href="#version-0">version/0</a></td><td>Return the version of the application.</td></tr>
<tr><td valign="top"><a href="#view-2">view/2</a></td><td> get view results from database.</td></tr>
<tr><td valign="top"><a href="#view-3">view/3</a></td><td>get view results from database.</td></tr>
</table>

<h2><a name="functions">Function Details</a></h2>

<h3 class="function"><a name="all_dbs-1">all_dbs/1</a></h3>
<div class="spec">
<p><tt>all_dbs(Server::<a href="#type-server">server()</a>) -&gt; {ok, iolist()}</tt><br></p>
</div><p>get list of databases on a CouchDB node</p>

<h3 class="function"><a name="all_docs-1">all_docs/1</a></h3>
<div class="spec">
<p><tt>all_docs(Db) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#all_docs-2"><tt>all_docs(Db, [])</tt></a>.</p>
<p>get all documents from a CouchDB database.</p>

<h3 class="function"><a name="all_docs-2">all_docs/2</a></h3>
<div class="spec">
<p><tt>all_docs(Db::<a href="#type-db">db()</a>, Options::list()) -&gt; {ok, View::<a href="#type-view">view()</a>} | {error, term()}</tt><br></p>
</div><p>get all documents from a CouchDB database. It return a
  #view{} record that you can use with couchbeam_view functions:
  <ul>
       <li><a href="couchbeam_view.html#count-1">couchbeam_view:count/1</a></li>
       <li><a href="couchbeam_view.html#fetch-1">couchbeam_view:fetch/1</a></li>
       <li><a href="couchbeam_view.html#first-1">couchbeam_view:first/1</a></li>
       <li><a href="couchbeam_view.html#fold-1">couchbeam_view:fold/1</a></li>
       <li><a href="couchbeam_view.html#foreach-1">couchbeam_view:foreach/1</a></li>
  </ul>
 </p>

<h3 class="function"><a name="changes-1">changes/1</a></h3>
<div class="spec">
<p><tt>changes(Db) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#changes-2"><tt>changes(Db, [])</tt></a>.</p>
<p>get all changes. Do not use this function for longpolling,
  instead use  <pre>  changes_wait_once</pre> or continuous, use
  <pre>     wait_once</pre></p>

<h3 class="function"><a name="changes-2">changes/2</a></h3>
<div class="spec">
<p><tt>changes(Db::<a href="#type-db">db()</a>, Options::<a href="#type-changesoptions">changesoptions()</a>) -&gt; term()</tt>
<ul class="definitions"><li><tt><a name="type-changesoptions">changesoptions()</a> = [<a href="#type-changeoption">changeoption()</a>]</tt></li><li><tt><a name="type-changeoption">changeoption()</a> = {include_docs, string()} | {filter, string()} | {since, integer() | string()} | {heartbeat, string() | boolean()}</tt></li></ul></p>
</div><p>get all changes. Do not use this function for longpolling,
       instead use  <pre>  changes_wait_once</pre> or continuous, use
       <pre>          wait_once</pre>
  See <a href="http://wiki.apache.org/couchdb/HTTP_database_API#Changes" target="_top"><tt>http://wiki.apache.org/couchdb/HTTP_database_API#Changes</tt></a> for more informations.
 </p>

<h3 class="function"><a name="changes_wait-2">changes_wait/2</a></h3>
<div class="spec">
<p><tt>changes_wait(Db, ClientPid) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#changes_wait-3"><tt>changes_wait(Db, ClientPid, [])</tt></a>.</p>
<p>wait for continuous changes</p>

<h3 class="function"><a name="changes_wait-3">changes_wait/3</a></h3>
<div class="spec">
<p><tt>changes_wait(Db::<a href="#type-db">db()</a>, Pid::pid(), Options::<a href="#type-changeoptions">changeoptions()</a>) -&gt; term()</tt><br></p>
</div><p>wait for continuous changes to a Pid. Messages sent to the Pid
       will be of the form <code>{reference(), message()}</code>,
       where <code>message()</code> is one of:
       <dl>
           <dt>done</dt>
               <dd>You got all the changes</dd>
           <dt>{change, term()}</dt>
               <dd>Change row</dd>
           <dt>{last_seq, binary()}</dt>
               <dd>last sequence</dd>
           <dt>{error, term()}</dt>
               <dd>n error occurred</dd>
       </dl></p>

<h3 class="function"><a name="changes_wait_once-1">changes_wait_once/1</a></h3>
<div class="spec">
<p><tt>changes_wait_once(Db) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#changes_wait_once-2"><tt>changes_wait_once(Db, [])</tt></a>.</p>
<p>wait for longpoll changes</p>

<h3 class="function"><a name="changes_wait_once-2">changes_wait_once/2</a></h3>
<div class="spec">
<p><tt>changes_wait_once(Db, Options) -&gt; any()</tt></p>
</div><p>wait for longpoll changes</p>

<h3 class="function"><a name="code_change-3">code_change/3</a></h3>
<div class="spec">
<p><tt>code_change(OldVsn, State, Extra) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="compact-1">compact/1</a></h3>
<div class="spec">
<p><tt>compact(Db::<a href="#type-db">db()</a>) -&gt; ok | {error, term()}</tt><br></p>
</div><p>Compaction compresses the database file by removing unused
  sections created during updates.
  See <a href="http://wiki.apache.org/couchdb/Compaction" target="_top"><tt>http://wiki.apache.org/couchdb/Compaction</tt></a> for more informations</p>

<h3 class="function"><a name="compact-2">compact/2</a></h3>
<div class="spec">
<p><tt>compact(Db::<a href="#type-db">db()</a>, ViewName::string()) -&gt; ok | {error, term()}</tt><br></p>
</div><p>Like compact/1 but this compacts the view index from the
  current version of the design document.
  See <a href="http://wiki.apache.org/couchdb/Compaction#View_compaction" target="_top"><tt>http://wiki.apache.org/couchdb/Compaction#View_compaction</tt></a> for more informations</p>

<h3 class="function"><a name="create_db-2">create_db/2</a></h3>
<div class="spec">
<p><tt>create_db(Server, DbName) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#create_db-4"><tt>create_db(Server, DbName, [], [])</tt></a>.</p>
<p>Create a database and a client for connectiong to it.</p>

<h3 class="function"><a name="create_db-3">create_db/3</a></h3>
<div class="spec">
<p><tt>create_db(Server, DbName, Options) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#create_db-4"><tt>create_db(Server, DbName, Options, [])</tt></a>.</p>
<p>Create a database and a client for connectiong to it.</p>

<h3 class="function"><a name="create_db-4">create_db/4</a></h3>
<div class="spec">
<p><tt>create_db(Server::<a href="#type-server">server()</a>, DbName::string(), Options::<a href="#type-optionList">optionList()</a>, Params::list()) -&gt; {ok, <a href="#type-db">db()</a> | {error, Error}}</tt><br></p>
</div><p><p>Create a database and a client for connectiong to it.</p>
 
       Connections are made to:
       <pre>          http://Host:PortPrefix/DbName</pre>
 
  If ssl is set https is used. See server_connections for options.
  Params is a list of optionnal query argument you want to pass to the
  db. Useful for bigcouch for example.
 </p>

<h3 class="function"><a name="db_exists-2">db_exists/2</a></h3>
<div class="spec">
<p><tt>db_exists(Server::<a href="#type-server">server()</a>, DbName::string()) -&gt; boolean()</tt><br></p>
</div><p>test if db with dbname exists on the CouchDB node</p>

<h3 class="function"><a name="db_info-1">db_info/1</a></h3>
<div class="spec">
<p><tt>db_info(Db::<a href="#type-db">db()</a>) -&gt; {ok, iolist() | {error, Error}}</tt><br></p>
</div><p>get database info</p>

<h3 class="function"><a name="db_request-4">db_request/4</a></h3>
<div class="spec">
<p><tt>db_request(Method, Url, Expect, Options) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="db_request-5">db_request/5</a></h3>
<div class="spec">
<p><tt>db_request(Method, Url, Expect, Options, Headers) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="db_request-6">db_request/6</a></h3>
<div class="spec">
<p><tt>db_request(Method, Url, Expect, Options, Headers, Body) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="db_url-1">db_url/1</a></h3>
<div class="spec">
<p><tt>db_url(Db) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="delete_attachment-3">delete_attachment/3</a></h3>
<div class="spec">
<p><tt>delete_attachment(Db, Doc, Name) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#delete_attachment-4"><tt>delete_attachment(Db, Doc, Name, [])</tt></a>.</p>
<p>delete a document attachment</p>

<h3 class="function"><a name="delete_attachment-4">delete_attachment/4</a></h3>
<div class="spec">
<p><tt>delete_attachment(Db, DocOrDocId, Name, Options) -&gt; any()</tt></p>
</div><p>delete a document attachment</p>

<h3 class="function"><a name="delete_db-1">delete_db/1</a></h3>
<div class="spec">
<p><tt>delete_db(Db) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#delete_db-2"><tt>delete_db(Server, DbName)</tt></a>.</p>
<p>delete database</p>

<h3 class="function"><a name="delete_db-2">delete_db/2</a></h3>
<div class="spec">
<p><tt>delete_db(Server::<a href="#type-server">server()</a>, DbName) -&gt; {ok, iolist() | {error, Error}}</tt><br></p>
</div><p>delete database</p>

<h3 class="function"><a name="delete_doc-2">delete_doc/2</a></h3>
<div class="spec">
<p><tt>delete_doc(Db, Doc) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#delete_doc-3"><tt>delete_doc(Db, Doc, [])</tt></a>.</p>
<p>delete a document</p>

<h3 class="function"><a name="delete_doc-3">delete_doc/3</a></h3>
<div class="spec">
<p><tt>delete_doc(Db, Doc, Options) -&gt; {ok, Result} | {error, Error}</tt><br></p>
</div><p>delete a document
  if you want to make sure the doc it emptied on delete, use the option
  {empty_on_delete,  true} or pass a doc with just _id and _rev
  members.</p>

<h3 class="function"><a name="delete_docs-2">delete_docs/2</a></h3>
<div class="spec">
<p><tt>delete_docs(Db, Docs) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#delete_docs-3"><tt>delete_docs(Db, Docs, [])</tt></a>.</p>
<p>delete a list of documents</p>

<h3 class="function"><a name="delete_docs-3">delete_docs/3</a></h3>
<div class="spec">
<p><tt>delete_docs(Db::<a href="#type-db">db()</a>, Docs::list(), Options::list()) -&gt; {ok, Result} | {error, Error}</tt><br></p>
</div><p>delete a list of documents
  if you want to make sure the doc it emptied on delete, use the option
  {empty_on_delete,  true} or pass a doc with just _id and _rev
  members.</p>

<h3 class="function"><a name="doc_exists-2">doc_exists/2</a></h3>
<div class="spec">
<p><tt>doc_exists(Db::<a href="#type-db">db()</a>, DocId::string()) -&gt; boolean()</tt><br></p>
</div><p>test if doc with uuid exists in the given db</p>

<h3 class="function"><a name="doc_url-2">doc_url/2</a></h3>
<div class="spec">
<p><tt>doc_url(Db, DocId) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="ensure_full_commit-1">ensure_full_commit/1</a></h3>
<div class="spec">
<p><tt>ensure_full_commit(Db) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#ensure_full_commit-2"><tt>ensure_full_commit(Db, [])</tt></a>.</p>
<p>commit all docs in memory</p>

<h3 class="function"><a name="ensure_full_commit-2">ensure_full_commit/2</a></h3>
<div class="spec">
<p><tt>ensure_full_commit(Db::<a href="#type-db">db()</a>, Options::list()) -&gt; {ok, term()} | {error, term()}</tt><br></p>
</div><p>commit all docs in memory</p>

<h3 class="function"><a name="fetch_attachment-3">fetch_attachment/3</a></h3>
<div class="spec">
<p><tt>fetch_attachment(Db, DocId, Name) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#fetch_attachment-5"><tt>fetch_attachment(Db, DocId, Name, [], DEFAULT_TIMEOUT)</tt></a>.</p>
<p>fetch a document attachment</p>

<h3 class="function"><a name="fetch_attachment-4">fetch_attachment/4</a></h3>
<div class="spec">
<p><tt>fetch_attachment(Db, DocId, Name, Options) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#fetch_attachment-5"><tt>fetch_attachment(Db, DocId, Name, Options,
		 DEFAULT_TIMEOUT)</tt></a>.</p>
<p>fetch a document attachment</p>

<h3 class="function"><a name="fetch_attachment-5">fetch_attachment/5</a></h3>
<div class="spec">
<p><tt>fetch_attachment(Db::<a href="#type-db">db()</a>, DocId::string(), Name::string(), Options::list(), Timeout::infinity | integer()) -&gt; {ok, binary()}</tt><br></p>
</div><p>fetch a document attachment</p>

<h3 class="function"><a name="get_uuid-1">get_uuid/1</a></h3>
<div class="spec">
<p><tt>get_uuid(Server::<a href="#type-server">server()</a>) -&gt; <a href="#type-lists">lists()</a></tt><br></p>
</div><p>Get one uuid from the server</p>

<h3 class="function"><a name="get_uuids-2">get_uuids/2</a></h3>
<div class="spec">
<p><tt>get_uuids(Server::<a href="#type-server">server()</a>, Count::integer()) -&gt; <a href="#type-lists">lists()</a></tt><br></p>
</div><p>Get a list of uuids from the server</p>

<h3 class="function"><a name="handle_call-3">handle_call/3</a></h3>
<div class="spec">
<p><tt>handle_call(X1, From, State) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="handle_cast-2">handle_cast/2</a></h3>
<div class="spec">
<p><tt>handle_cast(Msg, State) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="handle_info-2">handle_info/2</a></h3>
<div class="spec">
<p><tt>handle_info(Info, State) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="lookup_doc_rev-2">lookup_doc_rev/2</a></h3>
<div class="spec">
<p><tt>lookup_doc_rev(Db, DocId) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="lookup_doc_rev-3">lookup_doc_rev/3</a></h3>
<div class="spec">
<p><tt>lookup_doc_rev(Db, DocId, Params) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="make_url-3">make_url/3</a></h3>
<div class="spec">
<p><tt>make_url(Server, Path, Query) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="maybe_oauth_header-4">maybe_oauth_header/4</a></h3>
<div class="spec">
<p><tt>maybe_oauth_header(Method, Url, Headers, Options) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="open_db-2">open_db/2</a></h3>
<div class="spec">
<p><tt>open_db(Server, DbName) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#open_db-3"><tt>open_db(Server, DbName, [])</tt></a>.</p>
<p>Create a client for connection to a database</p>

<h3 class="function"><a name="open_db-3">open_db/3</a></h3>
<div class="spec">
<p><tt>open_db(Server::<a href="#type-server">server()</a>, DbName::string(), Options::<a href="#type-optionList">optionList()</a>) -&gt; {ok, <a href="#type-db">db()</a>}</tt><br></p>
</div><p>Create a client for connection to a database</p>

<h3 class="function"><a name="open_doc-2">open_doc/2</a></h3>
<div class="spec">
<p><tt>open_doc(Db, DocId) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#open_doc-3"><tt>open_doc(Db, DocId, [])</tt></a>.</p>
<p>open a document</p>

<h3 class="function"><a name="open_doc-3">open_doc/3</a></h3>
<div class="spec">
<p><tt>open_doc(Db::<a href="#type-db">db()</a>, DocId::string(), Params::list()) -&gt; {ok, Doc} | {error, Error}</tt><br></p>
</div><p>open a document
  Params is a list of query argument. Have a look in CouchDb API</p>

<h3 class="function"><a name="open_or_create_db-2">open_or_create_db/2</a></h3>
<div class="spec">
<p><tt>open_or_create_db(Server, DbName) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#open_or_create_db-4"><tt>open_or_create_db(Server, DbName, [], [])</tt></a>.</p>
<p>Create a client for connecting to a database and create the
       database if needed.</p>

<h3 class="function"><a name="open_or_create_db-3">open_or_create_db/3</a></h3>
<div class="spec">
<p><tt>open_or_create_db(Server, DbName, Options) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#open_or_create_db-4"><tt>open_or_create_db(Server, DbName, Options, [])</tt></a>.</p>
<p>Create a client for connecting to a database and create the
       database if needed.</p>

<h3 class="function"><a name="open_or_create_db-4">open_or_create_db/4</a></h3>
<div class="spec">
<p><tt>open_or_create_db(Server::<a href="#type-server">server()</a>, DbName::string(), Options::list(), Params::list()) -&gt; {ok, <a href="#type-db">db()</a> | {error, Error}}</tt><br></p>
</div><p>Create a client for connecting to a database and create the
       database if needed.</p>

<h3 class="function"><a name="put_attachment-4">put_attachment/4</a></h3>
<div class="spec">
<p><tt>put_attachment(Db, DocId, Name, Body) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#put_attachment-5"><tt>put_attachment(Db, DocId, Name, Body, [])</tt></a>.</p>
<p>put an attachment</p>

<h3 class="function"><a name="put_attachment-5">put_attachment/5</a></h3>
<div class="spec">
<p><tt>put_attachment(Db::<a href="#type-db">db()</a>, DocId::string(), Name::string(), Body::<a href="#type-body">body()</a>, Option::<a href="#type-optionList">optionList()</a>) -&gt; {ok, iolist()}</tt>
<ul class="definitions"><li><tt><a name="type-optionList">optionList()</a> = [<a href="#type-option">option()</a>]</tt></li><li><tt><a name="type-option">option()</a> = {rev, string()} | {content_type, string()} | {content_length, string()}</tt></li><li><tt><a name="type-body">body()</a> = [] | string() | binary() | <a href="#type-fun_arity_0">fun_arity_0()</a> | {<a href="#type-fun_arity_1">fun_arity_1()</a>, <a href="#type-initial_state">initial_state()</a>}</tt></li><li><tt><a name="type-initial_state">initial_state()</a> = term()</tt></li></ul></p>
</div><p>put an attachment</p>

<h3 class="function"><a name="replicate-2">replicate/2</a></h3>
<div class="spec">
<p><tt>replicate(Server::<a href="#type-server">server()</a>, RepObj::{list()}) -&gt; {ok, Result} | {error, Error}</tt><br></p>
</div><p>Handle replication. Pass an object containting all informations
  It allows to pass for example an authentication info
  <pre>  RepObj = {[
  {&lt;&lt;"source"&gt;&gt;, &lt;&lt;"sourcedb"&gt;&gt;},
  {&lt;&lt;"target"&gt;&gt;, &lt;&lt;"targetdb"&gt;&gt;},
  {&lt;&lt;"create_target"&gt;&gt;, true}
  ]}
  replicate(Server, RepObj).</pre>
 </p>

<h3 class="function"><a name="replicate-3">replicate/3</a></h3>
<div class="spec">
<p><tt>replicate(Server::<a href="#type-server">server()</a>, Source::string(), Target::<a href="#type-target">target()</a>) -&gt; {ok, Result} | {error, Error}</tt><br></p>
</div><p>Handle replication.</p>

<h3 class="function"><a name="replicate-4">replicate/4</a></h3>
<div class="spec">
<p><tt>replicate(Server, Source, Target, X4) -&gt; any()</tt></p>
</div><p>handle Replication. Allows to pass options with source and
  target.  Options is a Json object.
  ex:
  <pre>  Options = {[{&lt;&lt;"create_target"&gt;&gt;, true}]},
  couchbeam:replicate(S, "testdb", "testdb2", Options).</pre></p>

<h3 class="function"><a name="request-4">request/4</a></h3>
<div class="spec">
<p><tt>request(Method, Url, Expect, Options) -&gt; any()</tt></p>
</div><p>send an ibrowse request</p>

<h3 class="function"><a name="request-5">request/5</a></h3>
<div class="spec">
<p><tt>request(Method, Url, Expect, Options, Headers) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="request-6">request/6</a></h3>
<div class="spec">
<p><tt>request(Method, Url, Expect, Options, Headers, Body) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="request_stream-4">request_stream/4</a></h3>
<div class="spec">
<p><tt>request_stream(Pid, Method, Url, Options) -&gt; any()</tt></p>
</div><p>stream an ibrowse request</p>

<h3 class="function"><a name="request_stream-5">request_stream/5</a></h3>
<div class="spec">
<p><tt>request_stream(Pid, Method, Url, Options, Headers) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="request_stream-6">request_stream/6</a></h3>
<div class="spec">
<p><tt>request_stream(Pid, Method, Url, Options, Headers, Body) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="save_doc-2">save_doc/2</a></h3>
<div class="spec">
<p><tt>save_doc(Db, Doc) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#save_doc-3"><tt>save_doc(Db, Doc, [])</tt></a>.</p>
<p>save a document</p>

<h3 class="function"><a name="save_doc-3">save_doc/3</a></h3>
<div class="spec">
<p><tt>save_doc(Db::<a href="#type-db">db()</a>, Doc, Options::list()) -&gt; {ok, Doc1} | {error, Error}</tt><br></p>
</div><p><p>save a document  
A document is a Json object like this one:</p>
 
       <pre>          {[
           {&lt;&lt;"_id"&gt;&gt;, &lt;&lt;"myid"&gt;&gt;},
           {&lt;&lt;"title"&gt;&gt;, &lt;&lt;"test"&gt;&gt;}
       ]}</pre>
 
  Options are arguments passed to the request. This function return a
  new document with last revision and a docid. If _id isn't specified in
  document it will be created. Id is created by extracting an uuid from
  the couchdb node.
 </p>

<h3 class="function"><a name="save_docs-2">save_docs/2</a></h3>
<div class="spec">
<p><tt>save_docs(Db, Docs) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#save_docs-3"><tt>save_docs(Db, Docs, [])</tt></a>.</p>
<p>save a list of documents</p>

<h3 class="function"><a name="save_docs-3">save_docs/3</a></h3>
<div class="spec">
<p><tt>save_docs(Db::<a href="#type-db">db()</a>, Docs::list(), Options::list()) -&gt; {ok, Result} | {error, Error}</tt><br></p>
</div><p>save a list of documents</p>

<h3 class="function"><a name="server_connection-0">server_connection/0</a></h3>
<div class="spec">
<p><tt>server_connection() -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#server_connection-5"><tt>server_connection("127.0.0.1", 5984, "", [], false)</tt></a>.</p>
<p>Create a server for connectiong to a CouchDB node</p>

<h3 class="function"><a name="server_connection-2">server_connection/2</a></h3>
<div class="spec">
<p><tt>server_connection(Host, Port) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#server_connection-4"><tt>server_connection(Host, Port, "", [])</tt></a>.</p>
<p>Create a server for connectiong to a CouchDB node</p>

<h3 class="function"><a name="server_connection-4">server_connection/4</a></h3>
<div class="spec">
<p><tt>server_connection(Host::string(), Port::integer(), Prefix::string(), Options::<a href="#type-optionList">optionList()</a>) -&gt; Server::<a href="#type-server">server()</a></tt>
<ul class="definitions"><li><tt><a name="type-optionList">optionList()</a> = [<a href="#type-option">option()</a>]</tt></li><li><tt><a name="type-option">option()</a> = {is_ssl, boolean()} | {ssl_options, [SSLOpt]} | {pool_name, atom()} | {proxy_host, string()} | {proxy_port, integer()} | {proxy_user, string()} | {proxy_password, string()} | {basic_auth, {<a href="#type-username">username()</a>, <a href="#type-password">password()</a>}} | {cookie, string()} | {oauth, <a href="#type-oauthOptions">oauthOptions()</a>}</tt></li><li><tt><a name="type-username">username()</a> = string()</tt></li><li><tt><a name="type-password">password()</a> = string()</tt></li><li><tt>SSLOpt = term()</tt></li><li><tt><a name="type-oauthOptions">oauthOptions()</a> = [<a href="#type-oauth">oauth()</a>]</tt></li><li><tt><a name="type-oauth">oauth()</a> = {consumer_key, string()} | {token, string()} | {token_secret, string()} | {consumer_secret, string()} | {signature_method, string()}</tt></li></ul></p>
</div><p><p>Create a server for connectiong to a CouchDB node</p>
 
       Connections are made to:
       <pre>          http://Host:PortPrefix</pre>
 
       <p>If ssl is set https is used.</p>
 
       For a description of SSL Options, look in the <a href="http://www.erlang.org/doc/apps/ssl/index.html">ssl</a> manpage.
 </p>

<h3 class="function"><a name="server_info-1">server_info/1</a></h3>
<div class="spec">
<p><tt>server_info(Server::<a href="#type-server">server()</a>) -&gt; {ok, iolist()}</tt><br></p>
</div><p>Get Information from the server</p>

<h3 class="function"><a name="server_url-1">server_url/1</a></h3>
<div class="spec">
<p><tt>server_url(Server::{Host, Port}) -&gt; iolist()</tt><br></p>
</div><p>Assemble the server URL for the given client</p>

<h3 class="function"><a name="start-0">start/0</a></h3>
<div class="spec">
<p><tt>start() -&gt; any()</tt></p>
</div><p>Start the couchbeam process. Useful when testing using the shell.</p>

<h3 class="function"><a name="start_link-0">start_link/0</a></h3>
<div class="spec">
<p><tt>start_link() -&gt; {ok, pid()}</tt><br></p>
</div><p>Starts the couchbeam process linked to the calling process. Usually
  invoked by the supervisor couchbeam_sup</p>

<h3 class="function"><a name="stop-0">stop/0</a></h3>
<div class="spec">
<p><tt>stop() -&gt; any()</tt></p>
</div><p>Stop the couchbeam process. Useful when testing using the shell.</p>

<h3 class="function"><a name="stream_fetch_attachment-4">stream_fetch_attachment/4</a></h3>
<div class="spec">
<p><tt>stream_fetch_attachment(Db, DocId, Name, ClientPid) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#stream_fetch_attachment-6"><tt>stream_fetch_attachment(Db, DocId, Name, ClientPid, [],
			DEFAULT_TIMEOUT)</tt></a>.</p>
<p>stream fetch attachment to a Pid.</p>

<h3 class="function"><a name="stream_fetch_attachment-5">stream_fetch_attachment/5</a></h3>
<div class="spec">
<p><tt>stream_fetch_attachment(Db, DocId, Name, ClientPid, Options) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#stream_fetch_attachment-6"><tt>stream_fetch_attachment(Db, DocId, Name, ClientPid,
			Options, DEFAULT_TIMEOUT)</tt></a>.</p>
<p>stream fetch attachment to a Pid.</p>

<h3 class="function"><a name="stream_fetch_attachment-6">stream_fetch_attachment/6</a></h3>
<div class="spec">
<p><tt>stream_fetch_attachment(Db::<a href="#type-db">db()</a>, DocId::string(), Name::string(), ClientPid::pid(), Options::list(), Timeout::integer()) -&gt; {ok, reference()} | {error, term()}</tt><br></p>
</div><p>stream fetch attachment to a Pid. Messages sent to the Pid
       will be of the form <code>{reference(), message()}</code>,
       where <code>message()</code> is one of:
       <dl>
           <dt>done</dt>
               <dd>You got all the attachment</dd>
           <dt>{ok, binary()}</dt>
               <dd>Part of the attachment</dd>
           <dt>{error, term()}</dt>
               <dd>n error occurred</dd>
       </dl></p>

<h3 class="function"><a name="terminate-2">terminate/2</a></h3>
<div class="spec">
<p><tt>terminate(Reason, State) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="uuids_url-1">uuids_url/1</a></h3>
<div class="spec">
<p><tt>uuids_url(Server) -&gt; any()</tt></p>
</div>

<h3 class="function"><a name="version-0">version/0</a></h3>
<div class="spec">
<p><tt>version() -&gt; Version</tt>
<ul class="definitions"><li><tt>Version = string()</tt></li></ul></p>
</div><p>Return the version of the application.</p>

<h3 class="function"><a name="view-2">view/2</a></h3>
<div class="spec">
<p><tt>view(Db, ViewName) -&gt; any()</tt></p>
</div><p>Equivalent to <a href="#view-3"><tt>view(Db, ViewName, [])</tt></a>.</p>
<p> get view results from database</p>

<h3 class="function"><a name="view-3">view/3</a></h3>
<div class="spec">
<p><tt>view(Db::<a href="#type-db">db()</a>, ViewName::string(), Options::list()) -&gt; {ok, View::<a href="#type-view">view()</a>} | {error, term()}</tt><br></p>
</div><p><p>get view results from database. viewname is generally  
a tupple like {DesignName::string(), ViewName::string()} or string  
like "designname/viewname". It return a #view{} record  that you can use  
with couchbeam_view functions:</p>
 
  <ul>
       <li><a href="couchbeam_view.html#count-1">couchbeam_view:count/1</a></li>
       <li><a href="couchbeam_view.html#fetch-1">couchbeam_view:fetch/1</a></li>
       <li><a href="couchbeam_view.html#first-1">couchbeam_view:first/1</a></li>
       <li><a href="couchbeam_view.html#fold-1">couchbeam_view:fold/1</a></li>
       <li><a href="couchbeam_view.html#foreach-1">couchbeam_view:foreach/1</a></li>
  </ul>
 
  <p>Options are CouchDB view parameters</p>
 
  See <a href="http://wiki.apache.org/couchdb/HTTP_view_API" target="_top"><tt>http://wiki.apache.org/couchdb/HTTP_view_API</tt></a> for more informations.
 </p>
<hr>

<div class="navbar"><a name="#navbar_bottom"></a><table width="100%" border="0" cellspacing="0" cellpadding="2" summary="navigation bar"><tr><td><a href="overview-summary.html" target="overviewFrame">Overview</a></td><td><a href="http://www.erlang.org/"><img src="erlang.png" align="right" border="0" alt="erlang logo"></a></td></tr></table></div>
<p><i>Generated by EDoc, May 4 2011, 10:24:41.</i></p>
</body>
</html>
